{{ include parts_html_header.html }}

{{ if !n3s_is_login() }}
<div class="showblock" style="background-color:#fff0f0;">
  <span class="error">
    <a href="index.php?action=login">ãƒ­ã‚°ã‚¤ãƒ³</a>ã—ã¦ã„ã¾ã›ã‚“ã€‚
  </span>
</div>
{{ endif }}

<div class="showblock">
  <div>
    <h1>
      [ç·¨é›†ãƒ¢ãƒ¼ãƒ‰]
      {{ $title | check_mudai }}
      {{if $is_private}}ğŸ”’{{endif}}
    </h1>
    <p class="memo">{{ $memo }}</p>
  </div>
  <div>
    <label>ãƒ—ãƒ­ã‚°ãƒ©ãƒ : <span id="sizeSwitch">(â†’å¤§)</span><br />
      <textarea id="nako3code">{{ $body }}</textarea>
    </label><br />
    <button id="runButton" class="pure-button pure-button-primary">â–¶ å®Ÿ è¡Œ [F9]</button>
    <button id="clearButton" class="pure-button">ã‚¯ãƒªã‚¢</button>
    <div id="runbox">
      <!-- 3.1.19ä»¥ä¸Š -->
      <div id="nako3_output" style="display:none"></div>
      <!-- 3.1.18ä»¥ä¸‹ -->
      <div id="nako3_error" style="display:none"></div> 
      <!-- info box -->
      <div class="nako3row nako3info" id="nako3_info" style="display:none"></div>
  
      <canvas id='nako3_canvas' width='{{$canvas_w}}' height='{{$canvas_h}}'></canvas>
      <div id='nako3_div' class='nako3_div'></div>
      <div>
        <span class="memo">
          Canvas:
          å¹… <input type="text" id="canvas_w" value="{{$canvas_w}}" size="3"> Ã—
          é«˜ <input type="text" id="canvas_h" value="{{$canvas_h}}" size="3">
        </span>
      </div>
    </div>
  </div>
</div>

<!-- ç·¨é›†ãƒœã‚¿ãƒ³ -->
<div class="ctrl_block">
  {{if $app_id == 0}}
    <p><button onclick="saveClick(true)" class="pure-button">æ–°è¦ä¿å­˜</button></p>
  {{else}}
    {{if n3s_is_login()}}
      {{if ($my_user_id === $user_id) || n3s_is_admin()}}
      <p><button onclick="saveClick(false)" class="pure-button">ä¸Šæ›¸ãä¿å­˜</button></p>
      {{endif}}
    {{endif}}
  {{endif}}
</div>
<div class="ctrl_block">
  <h1>ç´ æã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h1>
  {{ if n3s_is_login() }}
  <p><a target="new" href="index.php?action=upload" class="pure-button">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢ã‚’é–‹ã</a></p>
  {{ else }}
  <p><a href="index.php?action=login">ãƒ­ã‚°ã‚¤ãƒ³</a>ã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>
  {{ endif }}
</div>

<!-- script for ace editor -->
{{ $import_editor | raw }}
<!-- script for nadesiko3 -->
{{ if $custom_head eq '' }}
{{   $import_nako | raw }}
{{ else }}
{{   $custom_head | raw }}
{{ endif }}

<!-- script for nako3storage-->
<script>
// nako3storage_show.js ã‹ã‚‰å‚ç…§ã™ã‚‹å¤‰æ•°
var setValue = function() { alert("ç¾åœ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚") }
var getValue = function() { alert("ç¾åœ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚"); return "" }
var editorObjects = null
var msie = {{e:echo ($msie)?'true':'false'}};

// nako3storage info
const baseurl = "{{ $baseurl | safe }}";
const editlink = "{{ $editlink  | safe }}";

// nako3 program info
const app_id = {{ $app_id }};
const nako_version = "{{ $version }}" + ".0.0.0"
const runbox_c = document.getElementById('runbox')
runbox_c.style.display = 'none'
</script>
<script defer src="{{e:echo n3s_getURL('nako3storage_edit.js', 'file', ['m'=>$mtime_nako3storage_edit]);}}"></script>
<script defer src="{{e:echo n3s_getURL('nako3storage_show.js', 'file', ['m'=>$mtime_nako3storage_show]);}}"></script>

{{ include parts_html_footer.html }}
